<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BN ç”¢ç”Ÿå°å·¥å…·</title>

    <!-- Google Tag Manager for BN Tool App tracking (GTM-N8VL4XS) -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-N8VL4XS');</script>
    <!-- End Google Tag Manager -->

    <!-- è¼‰å…¥ Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .camp-banner-container {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont,
                "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,
                "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
                "Noto Color Emoji";
        }
        .image-placeholder-box {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .cta-button-custom {
            background-color: #f90281;
        }
        .cta-button-custom:hover {
            background-color: #e10277;
        }
        .text-cta-custom {
            color: #f90281;
        }
        textarea.code-output {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
                "Liberation Mono", "Courier New", monospace;
        }
        .w-360 {
            width: 360px;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">
    <!-- Google Tag Manager (noscript) for BN Tool App tracking (GTM-N8VL4XS) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N8VL4XS"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="max-w-6xl mx-auto py-6 px-4">
        <h1 class="text-2xl md:text-3xl font-bold text-slate-800 mb-4">
            è£½ä½œç¥¨åˆ¸ BN å°å·¥å…· ğŸŸï¸ 
        </h1>
        <p class="text-sm text-slate-600 mb-6">
            å·¦é‚Šè¼¸å…¥æ–‡æ¡ˆèˆ‡åœ–ç‰‡ç¶²å€ï¼Œå³é‚Šæœƒå³æ™‚é è¦½ï¼Œä¸‹æ–¹æœƒè‡ªå‹•ç”¢å‡ºå¯è²¼åˆ°å°å·¥å…·çš„ HTML ç¨‹å¼ç¢¼ã€‚
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-5 space-y-4">
                <h2 class="text-lg font-semibold text-slate-800 mb-2">å¡«å…¥ BN è³‡è¨Š</h2>

                <div class="space-y-1">
                    <label for="titleInput" class="block text-sm font-medium text-slate-700">æ¨™é¡Œ</label>
                    <input
                        id="titleInput"
                        type="text"
                        class="w-full rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500 text-sm bg-slate-100"
                        value="æ•¸æ„Ÿå¯¦é©—å®¤å†¬ä»¤ç‡Ÿå„ªæƒ æŠ˜æ‰£ç¢¼"
                    />
                </div>

                <!-- è¦ªå­å¤©ä¸‹ Premium æœƒå“¡å°ˆå±¬ï¼æ­¤å¥å·²ç¡¬ç·¨ç¢¼ï¼Œä¸å¯æ›´æ”¹ -->

                <div class="space-y-1">
                    <label for="bodyInput" class="block text-sm font-medium text-slate-700">
                        å…§æ–‡
                    </label>
                    <textarea
                        id="bodyInput"
                        rows="3"
                        class="w-full rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500 text-sm bg-slate-100"
                    >æ•¸æ„Ÿå¯¦é©—å®¤å†¬ä»¤ç‡Ÿ $400 å„ªæƒ æŠ˜æ‰£ç¢¼ï¼ˆé©ç”¨æ–¼å®˜ç¶²ä¸Šæ•¸æ„Ÿå¯¦é©—å®¤ã€ç¾æ•¸å­¸é™¢èˆ‰è¾¦ä¹‹ 2026 å†¬ä»¤ç‡Ÿï¼‰</textarea>
                </div>

                <div class="space-y-1">
                    <label for="buttonTextInput" class="block text-sm font-medium text-slate-700">
                        æŒ‰éˆ•æ–‡å­—
                    </label>
                    <select
                        id="buttonTextInput"
                        class="w-full rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500 text-sm bg-slate-100 p-2"
                    >
                        <option value="ç«‹å³é ˜å–å…è²»ç¥¨åˆ¸">ç«‹å³é ˜å–å…è²»ç¥¨åˆ¸</option>
                        <option value="ç«‹å³é ˜å–å°ˆå±¬å„ªæƒ " selected>ç«‹å³é ˜å–å°ˆå±¬å„ªæƒ </option>
                        <option value="ç«‹å³åƒåŠ é™æ™‚æŠ½ç¥¨æ´»å‹•">ç«‹å³åƒåŠ é™æ™‚æŠ½ç¥¨æ´»å‹•</option>
                    </select>
                </div>

                <div class="space-y-1">
                    <label for="buttonUrlInput" class="block text-sm font-medium text-slate-700">
                        æŒ‰éˆ•é€£çµ URL
                    </label>
                    <input
                        id="buttonUrlInput"
                        type="text"
                        class="w-full rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500 text-sm bg-slate-100"
                        value="https://site.parenting.com.tw/home/coupon-1929"
                    />
                </div>

                <div class="space-y-1">
                    <label class="block text-sm font-medium text-slate-700">
                        åœ–ç‰‡ç¶²å€
                    </label>
                    <div class="space-y-1">
                        <input
                            id="imageUrlInput"
                            type="text"
                            placeholder="è²¼ä¸Šåœ–ç‰‡ç¶²å€ (e.g. https://...)"
                            class="w-full rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500 text-sm bg-slate-100"
                            value="https://placehold.co/160x160/f90281/ffffff?text=Image+Placeholder"
                        />
                    </div>
                </div>

                <button
                    id="copyCodeBtn"
                    type="button"
                    class="mt-2 inline-flex items-center justify-center px-4 py-2 rounded-lg text-sm font-semibold bg-slate-900 text-white hover:bg-slate-800 active:scale-[0.98] transition"
                >
                    è¤‡è£½ç¨‹å¼ç¢¼
                </button>
                <p id="copyNotice" class="text-xs text-emerald-600 mt-1 hidden">
                    âœ… å·²è¤‡è£½ç¨‹å¼ç¢¼ï¼
                </p>
            </div>

            <div class="space-y-4">
                <h2 class="text-lg font-semibold text-slate-800">å³æ™‚é è¦½</h2>

                <div id="desktopPreviewContainer" class="max-w-xl mx-auto camp-banner-container bg-white rounded-xl border border-gray-100 overflow-hidden shadow-lg">
                </div>

                <div class="space-y-2">
                    <h3 class="text-sm font-medium text-slate-700">
                        HTML è¼¸å‡ºç¨‹å¼ç¢¼
                    </h3>
                    <textarea
                        id="codeOutput"
                        rows="16"
                        class="code-output w-full rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500 text-xs md:text-sm p-3 bg-slate-900 text-slate-50"
                    ></textarea>
                </div>
            </div>
        </div>
    </div>

    <script>
        const GTM_ID = 'GTM-N8VL4XS';
        const FIXED_HIGHLIGHT_TEXT = "è¦ªå­å¤©ä¸‹ Premium æœƒå“¡å°ˆå±¬ï¼";

        const titleInput = document.getElementById("titleInput");
        const bodyInput = document.getElementById("bodyInput");
        const buttonTextInput = document.getElementById("buttonTextInput");
        const buttonUrlInput = document.getElementById("buttonUrlInput");
        const imageUrlInput = document.getElementById("imageUrlInput");

        const desktopPreviewContainer = document.getElementById("desktopPreviewContainer");

        const codeOutput = document.getElementById("codeOutput");
        const copyCodeBtn = document.getElementById("copyCodeBtn");
        const copyNotice = document.getElementById("copyNotice");

        function escapeHtml(str) {
            return String(str)
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;");
        }

        function escapeCssUrl(str) {
            return String(str).replace(/"/g, '\\"').replace(/\\/g, '\\\\');
        }

        function pushGtmEvent(eventName, properties = {}) {
            if (window.dataLayer) {
                window.dataLayer.push({
                    event: eventName,
                    ...properties
                });
            } else {
                console.warn("dataLayer æœªå®šç¾©ï¼Œç„¡æ³•æ¨é€ GTM äº‹ä»¶:", eventName);
            }
        }
        
        // Function to generate preview HTML
        function generatePreviewHtml(title, body, buttonText, buttonUrl, imageUrl) {
            const highlightSpan = `<span class="font-bold text-cta-custom">${escapeHtml(FIXED_HIGHLIGHT_TEXT)}</span>`;
            const bgStyle = imageUrl ? `style="background-image: url('${escapeCssUrl(imageUrl)}')"` : '';

            return `
            <div class="flex flex-col sm:flex-row items-stretch">
                <div
                    class="w-full sm:w-2/5 image-placeholder-box aspect-video sm:aspect-video"
                    ${bgStyle}
                ></div>
                <div class="w-full sm:w-3/5 p-6 space-y-3 flex flex-col justify-center">
                    <h2 class="text-2xl font-extrabold text-gray-800 tracking-tight">
                        ${escapeHtml(title)}
                    </h2>
                    <p class="text-base text-gray-700">
                        ${highlightSpan}
                        <span> ${escapeHtml(body)}</span>
                    </p>
                    <a
                        href="${escapeHtml(buttonUrl) || '#'}"
                        target="_blank"
                        rel="sponsored"
                        class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-lg text-white cta-button-custom transition duration-150 ease-in-out transform hover:scale-105"
                    >
                        ${escapeHtml(buttonText)}
                    </a>
                </div>
            </div>`;
        }

        // Function to generate final output HTML
        function generateOutputHtml(title, body, buttonText, buttonUrl, imageUrl) {
            const bgImage = imageUrl ? `background-image: url('${escapeCssUrl(imageUrl)}');` : '';

            // ç”¢ç”Ÿ GTM ç¨‹å¼ç¢¼ç‰‡æ®µ
            const gtmHeadSnippet = `
    <!-- Google Tag Manager for BN tracking -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','${GTM_ID}');<\/script>
    <!-- End Google Tag Manager -->`;
            
            const gtmBodySnippet = `
    <!-- Google Tag Manager (noscript) for BN tracking -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=${GTM_ID}"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->`;

            return `<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${escapeHtml(title)}</title>
    ${gtmHeadSnippet} <!-- GTM Head Snippet æ¤å…¥é» -->
    <!-- è¼‰å…¥ Tailwind CSS CDNï¼Œç¢ºä¿æ¨£å¼èƒ½è¢«è§£æ --><script src="https://cdn.tailwindcss.com"><\/script>
    <style>
      .camp-banner-container {
        font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      }
      .image-placeholder-box {
          ${bgImage}
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
      }
      .cta-button-custom {
          background-color: #f90281;
      }
      .cta-button-custom:hover {
          background-color: #e10277;
      }
      .text-cta-custom {
          color: #f90281;
      }
    </style>
</head>
<body class="p-2">
    ${gtmBodySnippet} <!-- GTM Body Snippet æ¤å…¥é» -->
    <div class="camp-banner-container bg-white mx-auto my-4 rounded-xl border border-gray-100 overflow-hidden shadow-lg max-w-xl">
        <div class="flex flex-col sm:flex-row items-stretch">
            <div class="w-full sm:w-2/5 image-placeholder-box aspect-video sm:aspect-video">
            </div>
            <div class="w-full sm:w-3/5 p-6 space-y-3 flex flex-col justify-center">
                <h2 class="text-2xl font-extrabold text-gray-800 tracking-tight">
                    ${escapeHtml(title)}
                </h2>
                <p class="text-base text-gray-700">
                    <span class="font-bold text-cta-custom">${escapeHtml(FIXED_HIGHLIGHT_TEXT)}</span>${escapeHtml(body)}
                </p>
                <a href="${escapeHtml(buttonUrl)}"
                    target="_blank"
                    rel="sponsored"
                    class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-lg text-white cta-button-custom transition duration-150 ease-in-out transform hover:scale-105">
                    ${escapeHtml(buttonText)}
                </a>
            </div>
        </div>
    </div>
</body>
</html>`;
        }

        function updateAll() {
            const title = titleInput.value || "";
            const body = bodyInput.value || "";
            const buttonText = buttonTextInput.value || "";
            const buttonUrl = buttonUrlInput.value || "";
            
            const finalImageUrl = imageUrlInput.value || ""; 

            const previewHtmlContent = generatePreviewHtml(title, body, buttonText, buttonUrl, finalImageUrl);
            desktopPreviewContainer.innerHTML = previewHtmlContent;

            const outputHtml = generateOutputHtml(title, body, buttonText, buttonUrl, finalImageUrl);
            codeOutput.value = outputHtml;
            
            copyNotice.classList.add("hidden");
        }

        [titleInput, bodyInput, buttonTextInput, buttonUrlInput, imageUrlInput].forEach(
            (el) => {
                el.addEventListener("input", updateAll);
            }
        );

        window.onload = updateAll;

        copyCodeBtn.addEventListener("click", async () => {
            try {
                await navigator.clipboard.writeText(codeOutput.value);
                copyNotice.classList.remove("hidden");
                
                pushGtmEvent('aitool_success', {
                    'tool_name': 'bn_generator',
                    'bn_title': titleInput.value || ''
                });
            } catch (e) {
                codeOutput.select();
                document.execCommand("copy");
                copyNotice.classList.remove("hidden");
                
                pushGtmEvent('aitool_success', {
                    'tool_name': 'bn_generator',
                    'bn_title': titleInput.value || ''
                });
            }
        });

    </script>
</body>
</html>
